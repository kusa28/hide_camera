<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カメラアプリ</title>
    <style>
        video {
            width: 100%;
            height: auto;
        }
        #switchButton {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>カメラアプリ</h1>
    <video id="video" autoplay></video>
    <button id="switchButton">カメラ切り替え</button>

    <script>
        let videoElement = document.getElementById('video');
        let currentStream = null;
        let useBackCamera = true;

        async function startCamera() {
            if (currentStream) {
                // 既存のストリームを停止
                currentStream.getTracks().forEach(track => track.stop());
            }

            try {
                // カメラを選択（背面または前面）
                currentStream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: useBackCamera ? 'environment' : 'user' }
                });
                
                // ビデオ要素にストリームを設定
                videoElement.srcObject = currentStream;
            } catch (error) {
                console.error('カメラの起動に失敗しました: ', error);
            }
        }

        document.getElementById('switchButton').addEventListener('click', () => {
            // 背面カメラと前面カメラの切り替え
            useBackCamera = !useBackCamera;
            startCamera();
        });

        // 初期起動時に背面カメラを使用
        startCamera();
    </script>
</body>
</html>
